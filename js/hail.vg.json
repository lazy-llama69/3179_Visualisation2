{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 849,
    "height": 500,
    "autosize": {
      "type": "fit",
      "contains": "padding"},
    "title": {
      "text": "1 Jan 2010 - 24 Sep 2024",
      "fontSize": 18, 
      "font": "Arial", 
      "anchor": "start", 
      "dy": -10        
    },
    "config": {
      "background": "#fffde7"  
    },
    "projection": {
      "type": "mercator",
      "center": [135.0, -28.0],
      "scale": 550
      
    },
    "layer": [
      {
        "data": {"sphere": true},
        "mark": {
          "type": "geoshape",
          "fill": "#dcecff"  
        }
      },
      {
        "data": {"graticule": true},
        "mark": {
          "type": "geoshape",
          "stroke": "#ccc", 
          "strokeWidth": 0.5 
        }
      },
      {
        "data": {
          "url": "./js/ne_110m_jus_aus.json",
          "format": {"type": "topojson", "feature": "gadm41_AUS_1"}   
        },
        "mark": {
          "type": "geoshape",
          "fill": "#d7ccc8",  
          "stroke": "#ffffff"  
        }
      },
      {
        "data": {
          "url": "./data/hail.csv"
        },
        "transform": [
          {
            "calculate": "toNumber(datum.Latitude)",
            "as": "latitude"
          },
          {
            "calculate": "toNumber(datum.Longitude)",
            "as": "longitude"
          },
          {
            "filter": "datum.latitude != 0 && datum.longitude != 0 && datum.Duration != 0"
          }
        ],
        "params":[
        {
        "name": "State_highlight",
        "select": {"type": "point", "fields": ["State"]},
        "bind": "legend"
        }
        ],

        "mark": {
          "type": "point",
          "tooltip": true
        },
        "encoding": {
          "longitude": {"field": "longitude", "type": "quantitative"},
          "latitude": {"field": "latitude", "type": "quantitative"},
          "size": {
            "field": "Hail size",
            "type": "quantitative",
            "title": "Hail size (cm)",
            "scale": {"domain": [0, 16]}
          },
          "color": {
            "field": "Duration",
            "type": "quantitative",
            "title": "Duration in mins",
            "scale": {"scheme": "redblue", "domain": [0, 160]}
          },
          "shape": {
            "field": "State",
            "type": "nominal",
            "scale": {
                "domain": ["NSW", "QLD", "VIC", "NT", "WA", "TAS"],
                "range": ["circle", "square", "triangle", "cross", "diamond", "triangle-down"]
            }
            },
        "opacity": {
          "condition": { "param": "State_highlight", "value": 0.6 },
          "value": 0.1
        },

          "tooltip": [
            {"field": "longitude", "type": "quantitative", "title": "Longitude"},
            {"field": "latitude", "type": "quantitative", "title": "Latitude"},
            {"field": "Hail size", "type": "quantitative", "title": "Hail size (cm)"},
            {"field": "Duration", "type": "quantitative", "title": "Duration in mins"},
            {"field": "State", "type": "nominal", "title": "State"}
          ]
        }
      }
    ]
  }
  